(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9767:(e,t,s)=>{Promise.resolve().then(s.bind(s,9599))},9599:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>$});var n=s(5155),r=s(5331),l=s(880),a=s(2888),o=s(2734),i=s(4367),c=s(1536),d=s(8422),x=s(2115);function u(e){let{setWhat:t}=e,[s,d]=(0,x.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{isOpen:s,setIsOpen:()=>{d(!s)}}),(0,n.jsxs)("div",{className:"flex flex-col w-36 h-screen bg-gray-800 text-white p-4 fixed top-0 left-0 z-10\n     transform ".concat(s?"translate-x-0":"-translate-x-full"," \n      lg:translate-x-0 lg:static transition duration-700 ease-in-out"),children:[(0,n.jsx)("div",{className:"mt-14"}),(0,n.jsx)(g,{Icon:(0,n.jsx)(c.K9B,{}),onClick:()=>t("User")}),(0,n.jsx)(g,{Icon:(0,n.jsx)(i.pmv,{}),onClick:()=>t("AddTask")}),(0,n.jsx)(g,{Icon:(0,n.jsx)(o.ko0,{}),onClick:()=>t("SuccessTask")}),(0,n.jsx)(g,{Icon:(0,n.jsx)(l.WJv,{})}),(0,n.jsx)(g,{Icon:(0,n.jsx)(a.eHT,{})}),(0,n.jsx)(g,{Icon:(0,n.jsx)(r.mLx,{})})]})]})}let h=e=>{let{isOpen:t,setIsOpen:s}=e;return(0,n.jsx)("div",{onClick:s,className:"lg:hidden flex itemAs-center justify-center w-12 h-12 bg-gray-700 rounded-xl mb-4 cursor-pointer\n                hover:bg-green-500 hover:text-gray-800\n                transition duration-500 ease-in-out fixed top-4 left-4 z-30\n                transform ".concat(t?"rotate-90":"rotate-0"," "),children:(0,n.jsx)(d.TF4,{})})},g=e=>{let{Icon:t,onClick:s}=e;return(0,n.jsx)("div",{onClick:s,className:"flex items-center justify-center w-12 h-12 bg-gray-700 rounded-xl mb-4 cursor-pointer   hover:bg-green-500 hover:text-gray-800   transition delay-200 duration-400 ease-in-out",children:t})},f={src:"/Todo-App/_next/static/media/User.23ca3d6d.png"};var m=s(9904),p=s(6553),j=s(4565),b=s(7058);let w=(0,m.Wp)({apiKey:"AIzaSyAuEvkeGYwotOt4SiAUvrNqt5lqamfo2ZQ",authDomain:"my-todo-app-5aeb6.firebaseapp.com",projectId:"my-todo-app-5aeb6",storageBucket:"my-todo-app-5aeb6.firebasestorage.app",messagingSenderId:"315068838519",appId:"1:315068838519:web:3df50e8cc6bc67a25c8c72",measurementId:"G-LGSSJES0W6"});(0,p.TT)().then(e=>{e&&(0,p.P5)(w)});let v=(0,j.xI)(w),k=new j.HF,y=(0,b.aU)(w);var N=s(5494);let A=new N.A;function I(){let e=A.get("user-info");return console.log(e),(0,n.jsx)("div",{className:"flex justify-center items-center bg-cover bg-center bg-no-repeat w-full h-screen",style:{backgroundImage:"url(".concat(f.src,")")},children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white bg-opacity-50 p-4 rounded-lg shadow-lg    w-3/4 h-3/4",children:[(0,n.jsxs)("div",{className:"flex w-full h-32 bg-gray-300 m-4 items-center",children:[(0,n.jsx)("div",{className:"w-24 h-24 bg-gray-400 rounded-full m-4",style:{backgroundImage:"url(".concat(null==e?void 0:e.photoURL,")")}}),(0,n.jsx)("div",{className:"flex-1 text-2xl font-bold text-sky-950",children:(null==e?void 0:e.displayName)||"Guest"})]}),(0,n.jsx)("div",{className:"flex-1 text-2xl font-bold",children:"This is details"})]})})}var T=s(9506);let S=new N.A;function D(e){let{setWhat:t,setIsSignedIn:s}=e;return(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:t}),(0,n.jsx)(I,{}),(0,n.jsx)("div",{className:"flex flex-col fixed inset-0 bg-white/70 backdrop-blur-sm items-center justify-center z-50 text-center",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"You need to sign in to continue"}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-4 m-10",children:[(0,n.jsx)("span",{className:"text-gray-500 text-4xl font-bold text-center",children:"Sign in with Google"}),(0,n.jsx)(T.F4b,{className:"text-6xl"})]}),(0,n.jsx)("button",{onClick:()=>C(s),className:"bg-green-500 text-white px-4 py-2 rounded-lg   hover:bg-green-600 transition-colors   duration-300 ease-linear hover:cursor-pointer",children:"Sign in"})]})})]})}let C=async e=>{let t=await (0,j.df)(v,k),s=new Date,n=v.currentUser;if(S.set("auth-token",t.user.stsTokenManager.refreshToken),!n){console.log("No user is signed in.");return}if(n.metadata.creationTime===n.metadata.lastSignInTime)await (0,b.BN)((0,b.H9)(y,"userInfor",t.user.uid),{email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName,uid:t.user.uid,createdAt:s,updatedAt:s}),S.set("user-info",JSON.stringify({email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName,uid:t.user.uid,createdAt:s,updatedAt:s})),console.log("New user just added to database.");else{let e=await (0,b.x7)((0,b.H9)(y,"userInfor",v.currentUser.uid));console.log("infor sigin: ",e.data());let t=e.data();t.taskArr&&delete t.taskArr,S.set("user-info",JSON.stringify(t)),console.log("old user")}e(!0)};var U=s(8144),_=s(6847),L=s(44),R=s(8613),H=s(1455),W=s.n(H);let z=new N.A;function E(e){let{InputRef:t,task:s,setTask:r,A_tasks:l,setA_tasks:a}=e,[o,i]=(0,x.useState)(W()("2024-03-23")),c=(0,x.useRef)(null),d=z.get("user-info"),u=new Date,h=async(e,s)=>{try{let t=new Date(o),n={task:e,description:s.current.value,uid:d.uid,createdAt:u,Deadline:t},r=[];r=l?[...l,n]:[n],await (0,b.BN)((0,b.H9)(y,"userInfor",d.uid),{email:d.email,photoURL:d.photoURL,displayName:d.displayName,uid:d.uid,createdAt:d.createdAt,updatedAt:d.updatedAt,taskArr:r}),n.newTask=!0,n.Deadline={seconds:t.getTime()/1e3};let i=[];l?(i=[...l,n].sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),console.log("pushed successfully")):i=[n],console.log("This is arr tasks",i),a(i)}catch(e){console.log("Error adding doc: ",e),alert("error: "+e.message)}r(""),t.current.value="",console.log("submitted")};return(0,n.jsx)("div",{className:"flex flex-col gap-y-1 fixed inset-0 bg-white/70 backdrop-blur-sm items-center justify-center z-50 text-center w-screen h-screen",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 bg-white p-4 rounded-lg shadow-lg w-3/4 lg:w-1/2 h-2/5 border-2 border-green-500",children:[(0,n.jsx)("p",{className:" text-gray-800 overflow-hidden",children:s}),(0,n.jsx)("input",{type:"text",ref:c,className:" text-gray-800 text-wrap text-left text-xs w-full h-16 px-1 outline-none border-2 border-black-900",placeholder:"description"}),(0,n.jsx)(L.$,{dateAdapter:_.R,children:(0,n.jsx)(U.j,{components:["DatePicker"],children:(0,n.jsx)(R.l,{label:"when this task is due",value:o,onChange:e=>i(e)})})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{onClick:function(){r(""),t.current.value="",console.log("cancelled")},className:"w-20 h-10 bg-red-600 text-white rounded-lg mt-2 text-sm items-end    hover:cursor-pointer hover:bg-red-800",children:"Cancel "}),(0,n.jsx)("button",{onClick:()=>{h(s,c)},className:"w-20 h-10 bg-blue-500 text-white rounded-lg mt-2 text-sm items-end    hover:cursor-pointer hover:bg-blue-800",children:"Add "})]})]})})}var O=s(648),G=s(6280);let M=new N.A;function F(){let[e,t]=(0,x.useState)(""),[s,r]=(0,x.useState)([]);(0,x.useEffect)(()=>{(async()=>{r(await B(a))})()},[]);let l=(0,x.useRef)(null),a=M.get("user-info");return s.length>0&&console.log("this is A_task: ",s),(0,n.jsxs)("div",{className:"bg-cover bg-center bg-no-repeat w-full h-screen  bg-white ",children:[(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center bg-cover bg-center bg-no-repeat w-full h-screen   ",children:[(0,n.jsxs)("div",{className:"flex justify-center items-center bg-white bg-opacity-50 p-3 rounded-lg shadow-lg w-3/4 h-12   fixed z-0 inset-0 left-1/2 top-10 transform -translate-x-1/2 -translate-y-1/2 ",children:[(0,n.jsx)("input",{type:"text",className:"text-sm w-full h-full px-1 outline-none",placeholder:"Add a task",ref:l}),(0,n.jsx)(J,{Icon:(0,n.jsx)(i.pmv,{}),onClick:()=>{t(l.current.value)}})]}),(0,n.jsx)("div",{className:"flex flex-col gap-1 text-slate-950 bg-white bg-opacity-70 w-2/3 h-1/2 fixed top-1/2 left-1/2 z-0    inset-0 rounded-sm -translate-x-1/2 -translate-y-1/4 overflow-y-scroll no-scrollbar ",children:(0,n.jsx)(Y,{A_tasks:s,setA_tasks:r,currentUser:a})})]}),e?(0,n.jsx)(E,{InputRef:l,task:e,setTask:t,A_tasks:s,setA_tasks:r}):null]})}let B=async e=>(await (0,b.x7)((0,b.H9)(y,"userInfor",e.uid))).data().taskArr.sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),J=e=>{let{Icon:t,onClick:s}=e;return(0,n.jsx)("div",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer bg-green-400 text-white ml-3   hover:bg-green-500 hover:text-gray-800   transition duration-300 ease-in-out",children:t})},P=async(e,t,s)=>{try{let n=await B(s);n.splice(e,1),t(n);let r=(0,b.H9)(y,"userInfor",s.uid);await (0,b.mZ)(r,{taskArr:n})}catch(e){console.error(e)}},Y=e=>{let{A_tasks:t,setA_tasks:s,currentUser:r}=e,l=async e=>{let t=(await (0,b.x7)((0,b.H9)(y,"userInfor",r.uid))).data(),n=t.taskArr.sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),l=n[e];n.splice(e,1);let a=[];if(null==t?void 0:t.successTaskArr)for(let e=0;e<t.successTaskArr.length;e++)a[e]=t.successTaskArr[e];a[a.length]=l,console.log("successTask:",l),console.log("successTask:",a.length);let o=(0,b.H9)(y,"userInfor",r.uid);await (0,b.mZ)(o,{taskArr:n,successTask:a}),console.log("add task successfully to successTask"),s(n)};return(0,n.jsx)(n.Fragment,{children:null==t?void 0:t.map((e,t)=>{let a=new Date(1e3*e.Deadline.seconds),o="".concat(a.getDate(),"/").concat(a.getMonth()+1),i=new Date,c=!1;return(i.getMonth()>a.getMonth()||i.getMonth()===a.getMonth()&&i.getDate()>=a.getDate())&&(c=!0),(0,n.jsxs)("div",{className:"flex items-center bg-white h-8 text-xs border-t border-y-neutral-500",children:[c?(0,n.jsx)(Z,{onClick:()=>l(t)}):(0,n.jsx)("div",{className:"w-8"}),(0,n.jsx)("div",{className:"w-1/3 m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.task}),(0,n.jsx)("div",{className:"hidden lg:block flex-2 m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.description||"no description"}),(0,n.jsx)("div",{className:"flex-1 text-center",children:o||"Loading..."}),(0,n.jsxs)("button",{className:"flex justify-center items-center rounded-lg border-4 w-20 border-red-900 bg-red-600 hover:cursor-pointer",onClick:()=>P(t,s,r),children:[(0,n.jsx)(O.b6i,{className:"text-2xl text-black rounded-t-full shadow-2xl"}),(0,n.jsx)("span",{className:"text-amber-50 font-medium hover:font-bold text-center",children:"Delete"})]})]},t)})})},Z=e=>{let{onClick:t}=e;return(0,n.jsx)("div",{className:"flex justify-center items-center w-8",onClick:t,children:(0,n.jsx)(G.GIU,{className:"text-2xl hover:cursor-pointer hover:text-green-700 "})})},q=new N.A,K=()=>(q.get("user-info"),(0,n.jsxs)("div",{className:"flex-col ",children:[(0,n.jsx)("div",{className:"h-16"}),(0,n.jsx)("span",{className:"m-8 mt-16 font-bold underline-offset-2 font-sans text-4xl text-black",children:"Your activity in 2025 "})]})),Q=new N.A;function $(){let[e,t]=(0,x.useState)(!!Q.get("auth-token")),[s,r]=(0,x.useState)(!1),[l,a]=(0,x.useState)(!1),[o,i]=(0,x.useState)(!1),[c,d]=(0,x.useState)("Home");console.log(c);let h=["User","AddTask","SuccessTask","Settings","Logout"],g=()=>{r(!1),a(!1),i(!1)};for(let e=0;e<h.length;e++)c!==h[0]||s?c!==h[1]||l?c!==h[2]||o||(g(),i(!0),console.log("success task component is open")):(g(),a(!0),console.log("add task is open")):(g(),r(!0),console.log("User is open"));return e?s?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(I,{})]}):l?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(F,{})]}):o?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(K,{})]}):(0,n.jsx)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:(0,n.jsx)(u,{setWhat:d})}):(0,n.jsx)(D,{setWhat:d,setIsSignedIn:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[479,613,206,512,777,585,844,753,711,87,992,895,671,441,517,358],()=>t(9767)),_N_E=e.O()}]);