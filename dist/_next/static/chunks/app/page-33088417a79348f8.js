(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9767:(e,t,s)=>{Promise.resolve().then(s.bind(s,9599))},9599:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V});var n=s(5155),l=s(5331),r=s(880),a=s(2888),o=s(2734),i=s(4367),c=s(1536),d=s(8422),x=s(2115);function u(e){let{setWhat:t}=e,[s,d]=(0,x.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{isOpen:s,setIsOpen:()=>{d(!s)}}),(0,n.jsxs)("div",{className:"flex flex-col w-36 h-screen bg-gray-800 text-white p-4 fixed top-0 left-0 z-10\n     transform ".concat(s?"translate-x-0":"-translate-x-full"," \n      lg:translate-x-0 lg:static transition duration-700 ease-in-out"),children:[(0,n.jsx)("div",{className:"mt-14"}),(0,n.jsx)(f,{Icon:(0,n.jsx)(c.K9B,{}),onClick:()=>t("User")}),(0,n.jsx)(f,{Icon:(0,n.jsx)(i.pmv,{}),onClick:()=>t("AddTask")}),(0,n.jsx)(f,{Icon:(0,n.jsx)(o.ko0,{}),onClick:()=>t("SuccessTask")}),(0,n.jsx)(f,{Icon:(0,n.jsx)(r.WJv,{})}),(0,n.jsx)(f,{Icon:(0,n.jsx)(a.eHT,{})}),(0,n.jsx)(f,{Icon:(0,n.jsx)(l.mLx,{})})]})]})}let h=e=>{let{isOpen:t,setIsOpen:s}=e;return(0,n.jsx)("div",{onClick:s,className:"lg:hidden flex items-center justify-center w-12 h-12 bg-gray-700 rounded-xl mb-4 cursor-pointer\n                hover:bg-green-500 hover:text-gray-800\n                transition duration-500 ease-in-out fixed top-4 left-4 z-30\n                transform ".concat(t?"rotate-90":"rotate-0"," "),children:(0,n.jsx)(d.TF4,{})})},f=e=>{let{Icon:t,onClick:s}=e;return(0,n.jsx)("div",{onClick:s,className:"flex items-center justify-center w-12 h-12 bg-gray-700 rounded-xl mb-4 cursor-pointer   hover:bg-green-500 hover:text-gray-800   transition delay-200 duration-400 ease-in-out",children:t})};var g=s(9904),m=s(6553),j=s(4565),p=s(7058);let w=(0,g.Wp)({apiKey:"AIzaSyAuEvkeGYwotOt4SiAUvrNqt5lqamfo2ZQ",authDomain:"my-todo-app-5aeb6.firebaseapp.com",projectId:"my-todo-app-5aeb6",storageBucket:"my-todo-app-5aeb6.firebasestorage.app",messagingSenderId:"315068838519",appId:"1:315068838519:web:3df50e8cc6bc67a25c8c72",measurementId:"G-LGSSJES0W6"});(0,m.TT)().then(e=>{e&&(0,m.P5)(w)});let b=(0,j.xI)(w),v=new j.HF,k=(0,p.aU)(w);var N=s(5494);let y=new N.A;function A(){let e=y.get("user-info");return console.log(e),(0,n.jsx)("div",{className:"flex justify-center items-center bg-white bg-center w-full h-screen",children:(0,n.jsxs)("div",{className:"flex flex-col  bg-white bg-opacity-50 p-4 rounded-lg shadow-lg    w-full h-5/6",children:[(0,n.jsxs)("span",{className:"text-xl lg:text-2xl text-black font-bold font-sans",children:["Welcome back, ",null==e?void 0:e.displayName]}),(0,n.jsx)("div",{className:"flex w-11/12 h-32 m-4 items-center",children:(0,n.jsx)("span",{className:"text-xl",children:" "})})]})})}var I=s(9506);let T=new N.A;function S(e){let{setWhat:t,setIsSignedIn:s}=e;return(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:t}),(0,n.jsx)(A,{}),(0,n.jsx)("div",{className:"flex flex-col fixed inset-0 bg-white/70 backdrop-blur-sm items-center justify-center z-50 text-center",children:(0,n.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"You need to sign in to continue"}),(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-4 m-10",children:[(0,n.jsx)("span",{className:"text-gray-500 text-4xl font-bold text-center",children:"Sign in with Google"}),(0,n.jsx)(I.F4b,{className:"text-6xl"})]}),(0,n.jsx)("button",{onClick:()=>D(s),className:"bg-green-500 text-white px-4 py-2 rounded-lg   hover:bg-green-600 transition-colors   duration-300 ease-linear hover:cursor-pointer",children:"Sign in"})]})})]})}let D=async e=>{let t=await (0,j.df)(b,v),s=new Date,n=b.currentUser;if(T.set("auth-token",t.user.stsTokenManager.refreshToken),!n){console.log("No user is signed in.");return}if(n.metadata.creationTime===n.metadata.lastSignInTime)await (0,p.BN)((0,p.H9)(k,"userInfor",t.user.uid),{email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName,uid:t.user.uid,createdAt:s,updatedAt:s}),T.set("user-info",JSON.stringify({email:t.user.email,photoURL:t.user.photoURL,displayName:t.user.displayName,uid:t.user.uid,createdAt:s,updatedAt:s})),console.log("New user just added to database.");else{let e=await (0,p.x7)((0,p.H9)(k,"userInfor",b.currentUser.uid));console.log("infor sigin: ",e.data());let t=e.data();t.taskArr&&delete t.taskArr,T.set("user-info",JSON.stringify(t)),console.log("old user")}e(!0)};var C=s(8144),U=s(6847),H=s(44),_=s(8613),W=s(1455),L=s.n(W);let E=new N.A;function R(e){let{InputRef:t,task:s,setTask:l,A_tasks:r,setA_tasks:a}=e,[o,i]=(0,x.useState)(L()("2024-03-23")),c=(0,x.useRef)(null),d=E.get("user-info"),u=new Date,h=async(e,s)=>{try{let t=new Date(o),n={task:e,description:s.current.value,uid:d.uid,createdAt:u,Deadline:t},l=[];l=r?[...r,n]:[n],await (0,p.mZ)((0,p.H9)(k,"userInfor",d.uid),{taskArr:l}),n.newTask=!0,n.Deadline={seconds:t.getTime()/1e3};let i=[];r?(i=[...r,n].sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),console.log("pushed successfully")):i=[n],console.log("This is arr tasks",i),a(i)}catch(e){console.log("Error adding doc: ",e),alert("error: "+e.message)}l(""),t.current.value="",console.log("submitted")};return(0,n.jsx)("div",{className:"flex flex-col gap-y-1 fixed inset-0 bg-white/70 backdrop-blur-sm items-center justify-center z-50 text-center w-screen h-screen",children:(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 bg-white p-4 rounded-lg shadow-lg w-3/4 lg:w-1/2 h-2/5 border-2 border-green-500",children:[(0,n.jsx)("p",{className:" text-gray-800 overflow-hidden",children:s}),(0,n.jsx)("input",{type:"text",ref:c,className:" text-gray-800 text-wrap text-left text-xs w-full h-16 px-1 outline-none border-2 border-black-900",placeholder:"description"}),(0,n.jsx)(H.$,{dateAdapter:U.R,children:(0,n.jsx)(C.j,{components:["DatePicker"],children:(0,n.jsx)(_.l,{label:"when this task is due",value:o,onChange:e=>i(e)})})}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{onClick:function(){l(""),t.current.value="",console.log("cancelled")},className:"w-20 h-10 bg-red-600 text-white rounded-lg mt-2 text-sm items-end    hover:cursor-pointer hover:bg-red-800",children:"Cancel "}),(0,n.jsx)("button",{onClick:()=>{h(s,c)},className:"w-20 h-10 bg-blue-500 text-white rounded-lg mt-2 text-sm items-end    hover:cursor-pointer hover:bg-blue-800",children:"Add "})]})]})})}var z=s(648),M=s(6280);let O=new N.A;function F(){let[e,t]=(0,x.useState)(""),[s,l]=(0,x.useState)([]);(0,x.useEffect)(()=>{(async()=>{l(await G(a))})()},[]);let r=(0,x.useRef)(null),a=O.get("user-info");return s.length>0&&console.log("this is A_task: ",s),(0,n.jsxs)("div",{className:" w-full h-screen  bg-white ",children:[(0,n.jsxs)("div",{className:" flex justify-center items-center bg-white bg-opacity-50 p-3 rounded-lg shadow-lg w-3/4 h-12   fixed z-0 inset-0 left-1/2 lg:top-10 bottom-20 transform -translate-x-1/2 translate-y-1/2 ",children:[(0,n.jsx)("input",{type:"text",className:"text-sm w-full h-full px-1 outline-none",placeholder:"Add a task",ref:r}),(0,n.jsx)(J,{Icon:(0,n.jsx)(i.pmv,{}),onClick:()=>{t(r.current.value)}})]}),(0,n.jsx)("div",{className:"flex flex-col justify-center items-center w-full h-screen",children:(0,n.jsx)("div",{className:"flex flex-col gap-1 text-slate-950 bg-white bg-opacity-70 w-2/3 h-1/2 fixed top-1/2 left-1/2 z-0    inset-0 rounded-sm -translate-x-1/2 -translate-y-1/4 overflow-y-scroll no-scrollbar ",children:(0,n.jsx)(B,{A_tasks:s,setA_tasks:l,currentUser:a})})}),e?(0,n.jsx)(R,{InputRef:r,task:e,setTask:t,A_tasks:s,setA_tasks:l}):null]})}let G=async e=>(await (0,p.x7)((0,p.H9)(k,"userInfor",e.uid))).data().taskArr.sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),J=e=>{let{Icon:t,onClick:s}=e;return(0,n.jsx)("div",{onClick:s,className:"flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer bg-green-400 text-white ml-3   hover:bg-green-500 hover:text-gray-800   transition duration-300 ease-in-out",children:t})},Z=async(e,t,s)=>{try{let n=await G(s);n.splice(e,1),t(n);let l=(0,p.H9)(k,"userInfor",s.uid);await (0,p.mZ)(l,{taskArr:n})}catch(e){console.error(e)}},B=e=>{let{A_tasks:t,setA_tasks:s,currentUser:l}=e,r=async e=>{let t=(await (0,p.x7)((0,p.H9)(k,"userInfor",l.uid))).data();console.log("userdb: ",t);let n=t.taskArr.sort((e,t)=>e.Deadline.seconds-t.Deadline.seconds),r=n[e];n.splice(e,1);let a=[];if(null==t?void 0:t.successTaskArr)for(let e=0;e<t.successTaskArr.length;e++)a[e]=t.successTaskArr[e],console.log("hello",t.successTaskArr[e]);a[a.length]=r,console.log("successTask:",a);let o=(0,p.H9)(k,"userInfor",l.uid);await (0,p.mZ)(o,{taskArr:n,successTaskArr:a}),console.log("add task successfully to successTask"),s(n)};return(0,n.jsx)(n.Fragment,{children:null==t?void 0:t.map((e,t)=>{let a=new Date(1e3*e.Deadline.seconds),o="".concat(a.getDate(),"/").concat(a.getMonth()+1),i=new Date,c=!1;return(i.getMonth()>a.getMonth()||i.getMonth()===a.getMonth()&&i.getDate()>=a.getDate())&&(c=!0),(0,n.jsxs)("div",{className:"flex items-center bg-white h-8 text-xs border-t border-y-neutral-500",children:[c?(0,n.jsx)(P,{onClick:()=>r(t)}):(0,n.jsx)("div",{className:"w-8"}),(0,n.jsx)("div",{className:"w-1/3 m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.task}),(0,n.jsx)("div",{className:"hidden lg:block flex-2 m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.description||"no description"}),(0,n.jsx)("div",{className:"flex-1 text-center",children:o||"Loading..."}),(0,n.jsxs)("button",{className:"flex justify-center items-center rounded-lg border-4 w-20 border-red-900 bg-red-600 hover:cursor-pointer",onClick:()=>Z(t,s,l),children:[(0,n.jsx)(z.b6i,{className:"text-2xl text-black rounded-t-full shadow-2xl"}),(0,n.jsx)("span",{className:"text-amber-50 font-medium hover:font-bold text-center",children:"Delete"})]})]},t)})})},P=e=>{let{onClick:t}=e;return(0,n.jsx)("div",{className:"flex justify-center items-center w-8",onClick:t,children:(0,n.jsx)(M.GIU,{className:"text-2xl hover:cursor-pointer hover:text-green-700 "})})},Y=new N.A,q=async e=>{let t=(await (0,p.x7)((0,p.H9)(k,"userInfor",e.uid))).data();return(null==t?void 0:t.successTaskArr)?t.successTaskArr:[]},K=e=>{let{successTasks:t}=e;return(0,n.jsx)("div",{className:"flex-col w-5/6",children:null==t?void 0:t.map((e,t)=>{let s=new Date(1e3*e.Deadline.seconds),l="".concat(s.getDate(),"/").concat(s.getMonth()+1);return(0,n.jsxs)("div",{className:"flex items-center bg-white hover:bg-neutral-100 transition-all duration-300 h-16 text-xs border-t border-y-neutral-500 text-black ",children:[(0,n.jsx)(c.A7C,{className:"text-3xl hover:text-4xl transition-all duration-300 absolute m-2 rounded-full"}),(0,n.jsx)("div",{className:"w-10"}),(0,n.jsxs)("div",{className:"flex-col flex-2",children:[(0,n.jsx)("div",{className:"w-1/3 m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.task}),(0,n.jsx)("div",{className:"hidden lg:block m-3 overflow-hidden overflow-x-hidden text-nowrap",children:e.description||"no description"})]}),(0,n.jsx)("div",{className:"flex-1 text-center",children:l||"Loading..."})]},t)})})},Q=()=>{let[e,t]=(0,x.useState)([]);(0,x.useEffect)(()=>{(async()=>{let e=await q(s);console.log("taskdb :",e),t(e)})()},[]);let s=Y.get("user-info");return(0,n.jsxs)("div",{className:"flex-col w-full",children:[(0,n.jsx)("div",{className:"h-16"}),(0,n.jsx)("span",{className:"mx-16 font-bold underline-offset-2 font-sans text-2xl lg:text-4xl text-black",children:"Your activity in 2025 "}),(0,n.jsx)("div",{className:"flex justify-center items-center my-10",children:(0,n.jsx)(K,{successTasks:e})})]})},$=new N.A;function V(){let[e,t]=(0,x.useState)(!!$.get("auth-token")),[s,l]=(0,x.useState)(!1),[r,a]=(0,x.useState)(!1),[o,i]=(0,x.useState)(!1),[c,d]=(0,x.useState)("Home");console.log(c);let h=["User","AddTask","SuccessTask","Settings","Logout"],f=()=>{l(!1),a(!1),i(!1)};for(let e=0;e<h.length;e++)c!==h[0]||s?c!==h[1]||r?c!==h[2]||o||(f(),i(!0),console.log("success task component is open")):(f(),a(!0),console.log("add task is open")):(f(),l(!0),console.log("User is open"));return e?s?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(A,{})]}):r?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(F,{})]}):o?(0,n.jsxs)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:[(0,n.jsx)(u,{setWhat:d}),(0,n.jsx)(Q,{})]}):(0,n.jsx)("div",{className:"flex bg-white h-screen  text-green-500 font-bold text-4xl ",children:(0,n.jsx)(u,{setWhat:d})}):(0,n.jsx)(S,{setWhat:d,setIsSignedIn:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[479,613,206,512,777,585,844,753,711,87,992,895,671,441,517,358],()=>t(9767)),_N_E=e.O()}]);